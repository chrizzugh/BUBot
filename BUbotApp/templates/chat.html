{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>BUbot</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            rel="icon"
            type="image/x-icon"
            href="{% static 'assets/BUbot-logo.png' %}"
        />
        <link
            href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp"
            rel="stylesheet"
        />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <link
            href="{% static 'css/styles.css' %}"
            rel="stylesheet"
            type="text/css"
        />
    </head>
    <body>
        <!-- nav -->
        <nav class="nav py-2 px-3 position-relative">
            <div class="d-flex align-items-center py-1">
                <a class="button-white px-1" href="{% url 'index' %}">
                    <span class="material-icons-sharp"> arrow_back </span>
                </a>
                <img
                    src="{% static 'assets/BUbot-logo.png' %}"
                    class="rounded-circle mr-2"
                    alt="BUbot"
                    width="40"
                    height="40"
                />
                <div class="pl-1">
                    <strong style="color: #fff">BUbot</strong>
                </div>
                <a
                    class="button-white position-absolute top-2 end-0 px-4"
                    href="{% url 'about' %}"
                >
                    <span class="material-icons-sharp"> info </span>
                </a>
            </div>
        </nav>
        <!-- chat section -->
        <form>
            {% csrf_token %}
            <div class="position-relative">
                <div class="chat-messages">
                    <!-- bubot default reply -->
                    <div class="chat-message-left pb-2 mt-4">
                        <div class="text-left ml-3 mr-3">
                            <img
                                src="{% static 'assets/BUbot-logo.png' %}"
                                class="rounded-circle mr-1"
                                alt="BUbot"
                                width="40"
                                height="40"
                            />
                            <div class="text-muted small text-nowrap mt-2">
                                2:34 am
                            </div>
                        </div>
                        <form-group>
                            <div
                                class="flex-shrink-1 py-2 px-3 mr-5 mr-sm-5 ml-3 mb-4"
                                style="
                                    background: rgb(61, 178, 255);
                                    border-radius: 25px;
                                "
                            >
                                Hi! How can I help you?
                            </div>
                        </form-group>
                    </div>
                    <!-- user chat is chat-message-right -->
                    <div
                        class="chat-message-right pb-4 userDiv"
                        name="userDiv"
                        id="userDiv"
                        display=""
                    >
                        <div class="text-right mr-3 ml-3">
                            <img
                                src="{% static 'assets/user.png' %}"
                                class="rounded-circle mr-1"
                                alt="user"
                                width="40"
                                height="40"
                            />
                            <div class="text-muted small text-nowrap mt-2">
                                2:33 am
                            </div>
                        </div>
                        <form-group
                            action=""
                            method=""
                            id="userQuery"
                            name="userQuery"
                        >
                            <div
                                class="flex-shrink-1 py-2 px-3 mr-2 ml-5 ml-sm-5 mb-4 mt-2"
                                style="
                                    background: rgb(243, 113, 36);
                                    border-radius: 25px;
                                "
                                id="bubbleDiv"
                                name="bubbleDiv"
                            ></div>
                        </form-group>
                    </div>

                    <!-- bubot reply is chat-message-left -->
                    <!-- <div class="chat-message-left pb-4">
                        <div class="text-left ml-3 mr-3">
                            <img
                                src="{% static 'assets/BUbot-logo.png' %}"
                                class="rounded-circle mr-1"
                                alt="BUbot"
                                width="40"
                                height="40"
                            />
                            <div class="text-muted small text-nowrap mt-2">
                                2:34 am
                            </div>
                        </div>
                        <form-group>
                            <div
                                class="flex-shrink-1 py-2 px-3 mr-5 mr-sm-5 ml-3 mb-4"
                                style="
                                    background: rgb(61, 178, 255);
                                    border-radius: 25px;
                                "
                            >
                                Sit meis deleniti eu, pri vidit meliore docendi
                                ut, an eum erat animal commodo. Sit meis
                                deleniti eu, pri vidit meliore docendi ut, an
                                eum erat animal commodo. Sit meis deleniti eu,
                                pri vidit meliore docendi ut, an eum erat animal
                                commodo.
                            </div>
                        </form-group>
                    </div> -->
                </div>
            </div>
        </form>
        <!-- user asking query -->
        <form id="form" method="post" action="">
            {% csrf_token %}
            <div class="py-3 px-4 input-group fixed-bottom">
                <div class="input-group">
                    <input
                        type="text"
                        class="form-control"
                        placeholder="Type here..."
                        id="userQuestion"
                        name="userQuestion"
                    />
                    <button
                        class="button-send"
                        id="sendBtn"
                        name="sendBtn"
                        method=""
                        type="button"
                    >
                        <span class="material-icons-sharp"> send </span>
                    </button>
                </div>
            </div>
        </form>
        <script>
            // For displaying query in bubbleDiv
            var userQuestion;
            var userDiv;
            function getuserQuestion() {
                return document.getElementById("userQuestion").value;
            }
            var button = document.getElementById("sendBtn");
            var bubbleDivVal = document.getElementById("bubbleDiv").value;
            button.addEventListener("click", function () {
                var userQuestion = getuserQuestion();
                document.getElementById("bubbleDiv").innerHTML = userQuestion;
                $("#bubbleDiv").parent().parent().show();
            });

            // hide userDiv if empty
            $("#bubbleDiv:empty").parent().parent().hide();
            userQuestion = "";
        </script>
    </body>
</html>
